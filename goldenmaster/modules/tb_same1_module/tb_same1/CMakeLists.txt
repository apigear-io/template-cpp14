cmake_minimum_required(VERSION 3.23.2)
project(tb_same1)

include(CTest)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(INCLUDE_INSTALL_DIR include/tb_same1/ CACHE FILEPATH "")
set(LIB_INSTALL_DIR lib/ CACHE FILEPATH "")
set(InstallDir ${LIB_INSTALL_DIR}/cmake/tb_same1)

add_subdirectory(generated/api)
add_subdirectory(generated/core)
add_subdirectory(implementation)
add_subdirectory(generated/monitor)
add_subdirectory(generated/olink)

include(CMakePackageConfigHelpers)
configure_package_config_file(Tb_same1Config.cmake.in
  ${CMAKE_CURRENT_BINARY_DIR}/tb_same1Config.cmake
  INSTALL_DESTINATION ${InstallDir}
  PATH_VARS INCLUDE_INSTALL_DIR LIB_INSTALL_DIR)
write_basic_package_version_file(
  ${CMAKE_CURRENT_BINARY_DIR}/tb_same1ConfigVersion.cmake
  VERSION 1.0
  COMPATIBILITY SameMinorVersion )
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/tb_same1Config.cmake
              ${CMAKE_CURRENT_BINARY_DIR}/tb_same1ConfigVersion.cmake
        DESTINATION ${InstallDir} )
