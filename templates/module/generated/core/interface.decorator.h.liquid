{% comment %} // Copyright (c) ApiGear UG 2020 {% endcomment -%}
{{ module | licGPLcpp -}}
{% assign class = "Abstract" | append: interface.name | capital | append: "Decorator" -%}
{% assign interface_class = "I" | append: interface.name | capital %}
{% assign sub_class = "I" | append: interface.name | capital | append: "Subscriber" %}
{% assign pub_interface = "I" | append: interface.name | capital | append: "Publisher"%}
#pragma once
#include "{{module.name|identifier}}/generated/api/{{module.name|identifier}}.h"
#include "{{module.name|identifier}}/generated/api/common.h"

namespace {{ system.name | capital }} {
namespace {{ module.name | capital }} {

class {{ system.name | constant }}_{{ module.name | constant }}_EXPORT {{class}} : public {{interface_class}}, public {{sub_class}} {
public:
    explicit {{class}}({{interface_class}}* impl);
    {{interface_class}}* swapUnderlyingImplementation({{interface_class}}* impl);
    {{interface_class}}* disconnectFromUnderlyingImplementation();
    virtual ~{{class}}();
public:
{% for property in interface.properties %}
    // property {{property.name}}
    void set{{property.name|capital}}({{ property|cpp14Param }}) override;
    {{property|cpp14Return: true}} {{property.name}}() const override;
    {{nl}}    
{% endfor %}
    // operations
{% for operation in interface.operations %}
    {{operation|cpp14Return}} {{operation.name}}({{operation|cpp14Params}}) override;
    std::future<{{operation|cpp14Return}}> {{operation.name}}Async({{operation|cpp14Params}}) override;
{% endfor %}

    {{pub_interface}}& _getPublisher() const override;
private:
    {{interface_class}}* m_impl {nullptr};
};
} // namespace {{ module.name | capital }}
} // namespace {{ system.name | capital }}
