{% comment %} // Copyright (c) ApiGear UG 2020 {% endcomment -%}
#include "{{module.name|identifier}}/generated/core/{{module.name|identifier}}.json.adapter.h"

namespace {{ system.name | capital }} {
namespace {{ module.name | capital }} {

{% for struct in module.structs %}
{% assign class = struct.name %}
void from_json(const nlohmann::json& j, {{class}}& p) {
    p = {{class}}(
{% for field in struct.fields %}
        j.at("{{field.name}}").get<{{field | cpp14Return}}>(){% unless forloop.last %},{% endunless %}
{% endfor %}
    );
}
void to_json(nlohmann::json& j, const {{class}}& p) {
    j = nlohmann::json{
{% for field in struct.fields %}
        {"{{field.name}}", p.{{field.name}}}{% unless forloop.last %},{% endunless %}
{% endfor %}
        };
}
{% endfor %}
} // namespace {{ module.name | capital }}
} // namespace {{ system.name | capital }}
